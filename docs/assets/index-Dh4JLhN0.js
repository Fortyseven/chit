var Ie=Object.defineProperty;var je=(e,t,n)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ne=(e,t,n)=>(je(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function v(){}const xe=e=>e;function Se(e){return e()}function ge(){return Object.create(null)}function I(e){e.forEach(Se)}function ee(e){return typeof e=="function"}function j(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Pe(e){return Object.keys(e).length===0}function ue(e,...t){if(e==null){for(const s of t)s(void 0);return v}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ze(e){let t;return ue(e,n=>t=n)(),t}function se(e,t,n){e.$$.on_destroy.push(ue(t,n))}function qe(e,t,n){return e.set(n),t}const Oe=typeof window<"u";let Re=Oe?()=>window.performance.now():()=>Date.now(),fe=Oe?e=>requestAnimationFrame(e):v;const A=new Set;function Le(e){A.forEach(t=>{t.c(e)||(A.delete(t),t.f())}),A.size!==0&&fe(Le)}function Te(e){let t;return A.size===0&&fe(Le),{promise:new Promise(n=>{A.add(t={c:e,f:n})}),abort(){A.delete(t)}}}function $(e,t){e.appendChild(t)}function ke(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Be(e){const t=b("style");return t.textContent="/* empty */",De(ke(e),t),t.sheet}function De(e,t){return $(e.head||e,t),t.sheet}function P(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function Fe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function te(e){return document.createTextNode(e)}function T(){return te(" ")}function ae(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function He(e){return Array.from(e.childNodes)}function de(e,t){t=""+t,e.data!==t&&(e.data=t)}function me(e,t,n){e.classList.toggle(t,!!n)}function Ke(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}const G=new Map;let Q=0;function Je(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ue(e,t){const n={stylesheet:Be(t),rules:{}};return G.set(e,n),n}function _e(e,t,n,s,r,o,l,i=0){const u=16.666/s;let c=`{
`;for(let _=0;_<=1;_+=u){const g=t+(n-t)*o(_);c+=_*100+`%{${l(g,1-g)}}
`}const a=c+`100% {${l(n,1-n)}}
}`,f=`__svelte_${Je(a)}_${i}`,h=ke(e),{stylesheet:y,rules:d}=G.get(h)||Ue(h,e);d[f]||(d[f]=!0,y.insertRule(`@keyframes ${f} ${a}`,y.cssRules.length));const w=e.style.animation||"";return e.style.animation=`${w?`${w}, `:""}${f} ${s}ms linear ${r}ms 1 both`,Q+=1,f}function Ve(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),r=n.length-s.length;r&&(e.style.animation=s.join(", "),Q-=r,Q||Xe())}function Xe(){fe(()=>{Q||(G.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&O(t)}),G.clear())})}let B;function q(e){B=e}function Ge(){if(!B)throw new Error("Function called outside component initialization");return B}function Qe(e){Ge().$$.on_mount.push(e)}const N=[],ie=[];let C=[];const $e=[],We=Promise.resolve();let le=!1;function Ye(){le||(le=!0,We.then(Me))}function D(e){C.push(e)}const re=new Set;let k=0;function Me(){if(k!==0)return;const e=B;do{try{for(;k<N.length;){const t=N[k];k++,q(t),Ze(t.$$)}}catch(t){throw N.length=0,k=0,t}for(q(null),N.length=0,k=0;ie.length;)ie.pop()();for(let t=0;t<C.length;t+=1){const n=C[t];re.has(n)||(re.add(n),n())}C.length=0}while(N.length);for(;$e.length;)$e.pop()();le=!1,re.clear(),q(e)}function Ze(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(D)}}function et(e){const t=[],n=[];C.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),C=t}let z;function tt(){return z||(z=Promise.resolve(),z.then(()=>{z=null})),z}function oe(e,t,n){e.dispatchEvent(Ke(`${t?"intro":"outro"}${n}`))}const X=new Set;let ce;function F(e,t){e&&e.i&&(X.delete(e),e.i(t))}function W(e,t,n,s){if(e&&e.o){if(X.has(e))return;X.add(e),ce.c.push(()=>{X.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}const nt={duration:0};function ye(e,t,n,s){let o=t(e,n,{direction:"both"}),l=s?0:1,i=null,u=null,c=null,a;function f(){c&&Ve(e,c)}function h(d,w){const _=d.b-l;return w*=Math.abs(_),{a:l,b:d.b,d:_,duration:w,start:d.start,end:d.start+w,group:d.group}}function y(d){const{delay:w=0,duration:_=300,easing:g=xe,tick:L=v,css:p}=o||nt,S={start:Re()+w,b:d};d||(S.group=ce,ce.r+=1),"inert"in e&&(d?a!==void 0&&(e.inert=a):(a=e.inert,e.inert=!0)),i||u?u=S:(p&&(f(),c=_e(e,l,d,_,w,g,p)),d&&L(0,1),i=h(S,_),D(()=>oe(e,d,"start")),Te(x=>{if(u&&x>u.start&&(i=h(u,_),u=null,oe(e,i.b,"start"),p&&(f(),c=_e(e,l,i.b,i.duration,0,g,o.css))),i){if(x>=i.end)L(l=i.b,1-l),oe(e,i.b,"end"),u||(i.b?f():--i.group.r||I(i.group.c)),i=null;else if(x>=i.start){const E=x-i.start;l=i.a+i.d*g(E/i.duration),L(l,1-l)}}return!!(i||u)}))}return{run(d){ee(o)?tt().then(()=>{o=o({direction:d?"in":"out"}),y(d)}):y(d)},end(){f(),i=u=null}}}function be(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Y(e){e&&e.c()}function H(e,t,n){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,n),D(()=>{const o=e.$$.on_mount.map(Se).filter(ee);e.$$.on_destroy?e.$$.on_destroy.push(...o):I(o),e.$$.on_mount=[]}),r.forEach(D)}function K(e,t){const n=e.$$;n.fragment!==null&&(et(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function st(e,t){e.$$.dirty[0]===-1&&(N.push(e),Ye(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function U(e,t,n,s,r,o,l=null,i=[-1]){const u=B;q(e);const c=e.$$={fragment:null,ctx:[],props:o,update:v,not_equal:r,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ge(),dirty:i,skip_bound:!1,root:t.target||u.$$.root};l&&l(c.root);let a=!1;if(c.ctx=n?n(e,t.props||{},(f,h,...y)=>{const d=y.length?y[0]:h;return c.ctx&&r(c.ctx[f],c.ctx[f]=d)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](d),a&&st(e,f)),h}):[],c.update(),a=!0,I(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const f=He(t.target);c.fragment&&c.fragment.l(f),f.forEach(O)}else c.fragment&&c.fragment.c();t.intro&&F(e.$$.fragment),H(e,t.target,t.anchor),Me()}q(u)}class V{constructor(){ne(this,"$$");ne(this,"$$set")}$destroy(){K(this,1),this.$destroy=v}$on(t,n){if(!ee(n))return v;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!Pe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const rt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rt);function ot(e){let t,n,s;return{c(){t=b("input"),m(t,"class","has-text-primary has-background-dark svelte-1rb7rra"),m(t,"type","text"),m(t,"placeholder","Type a message...")},m(r,o){P(r,t,o),e[2](t),n||(s=ae(t,"keypress",e[1]),n=!0)},p:v,i:v,o:v,d(r){r&&O(t),e[2](null),n=!1,s()}}}function it(e,t,n){let s;function r(l){l.key==="Enter"&&(console.log("Enter pressed"),n(0,s.value="",s))}function o(l){ie[l?"unshift":"push"](()=>{s=l,n(0,s)})}return[s,r,o]}class lt extends V{constructor(t){super(),U(this,t,it,ot,j,{})}}function ve(e,{delay:t=0,duration:n=400,easing:s=xe}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:o=>`opacity: ${o*r}`}}const M=[];function ct(e,t){return{subscribe:pe(e,t).subscribe}}function pe(e,t=v){let n;const s=new Set;function r(i){if(j(e,i)&&(e=i,n)){const u=!M.length;for(const c of s)c[1](),M.push(c,e);if(u){for(let c=0;c<M.length;c+=2)M[c][0](M[c+1]);M.length=0}}}function o(i){r(i(e))}function l(i,u=v){const c=[i,u];return s.add(c),s.size===1&&(n=t(r,o)||v),i(e),()=>{s.delete(c),s.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:l}}function ut(e,t,n){const s=!Array.isArray(e),r=s?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return ct(n,(l,i)=>{let u=!1;const c=[];let a=0,f=v;const h=()=>{if(a)return;f();const d=t(s?c[0]:c,l,i);o?l(d):f=ee(d)?d:v},y=r.map((d,w)=>ue(d,_=>{c[w]=_,a&=~(1<<w),u&&h()},()=>{a|=1<<w}));return u=!0,h(),function(){I(y),f(),u=!1}})}let J=pe([]),Z=pe(0);const Ne=ut([J,Z],([e,t])=>e[t]),R=Object.freeze(Object.defineProperty({__proto__:null,currentModel:Ne,currentModelIndex:Z,models:J},Symbol.toStringTag,{value:"Module"}));function we(e,t,n){const s=e.slice();return s[7]=t[n],s[9]=n,s}function Ee(e){let t,n=e[7].name+"",s,r,o;function l(){return e[5](e[9])}return{c(){t=b("a"),s=te(n),m(t,"class","dropdown-item")},m(i,u){P(i,t,u),$(t,s),r||(o=ae(t,"click",l),r=!0)},p(i,u){e=i,u&4&&n!==(n=e[7].name+"")&&de(s,n)},d(i){i&&O(t),r=!1,o()}}}function ft(e){var L;let t,n,s,r,o=(((L=e[1])==null?void 0:L.name)||"--")+"",l,i,u,c,a,f,h,y,d,w,_=be(e[2]),g=[];for(let p=0;p<_.length;p+=1)g[p]=Ee(we(e,_,p));return{c(){t=b("div"),n=b("div"),s=b("button"),r=b("span"),l=te(o),i=T(),u=b("span"),u.innerHTML='<i class="fas fa-angle-down" aria-hidden="true"></i>',c=T(),a=b("div"),f=b("div");for(let p=0;p<g.length;p+=1)g[p].c();m(u,"class","icon is-small"),m(s,"class","button svelte-g2jfds"),m(s,"aria-haspopup","true"),m(s,"aria-controls","dropdown-menu"),m(n,"class","dropdown-trigger svelte-g2jfds"),m(f,"class","dropdown-content"),m(a,"class","dropdown-menu"),m(a,"role","menu"),m(t,"class","model-list dropdown svelte-g2jfds"),me(t,"is-active",e[0])},m(p,S){P(p,t,S),$(t,n),$(n,s),$(s,r),$(r,l),$(s,i),$(s,u),$(t,c),$(t,a),$(a,f);for(let x=0;x<g.length;x+=1)g[x]&&g[x].m(f,null);y=!0,d||(w=ae(n,"click",e[4]),d=!0)},p(p,[S]){var x;if((!y||S&2)&&o!==(o=(((x=p[1])==null?void 0:x.name)||"--")+"")&&de(l,o),S&12){_=be(p[2]);let E;for(E=0;E<_.length;E+=1){const he=we(p,_,E);g[E]?g[E].p(he,S):(g[E]=Ee(he),g[E].c(),g[E].m(f,null))}for(;E<g.length;E+=1)g[E].d(1);g.length=_.length}(!y||S&1)&&me(t,"is-active",p[0])},i(p){y||(p&&D(()=>{y&&(h||(h=ye(a,ve,{},!0)),h.run(1))}),y=!0)},o(p){p&&(h||(h=ye(a,ve,{},!1)),h.run(0)),y=!1},d(p){p&&O(t),Fe(g,p),p&&h&&h.end(),d=!1,w()}}}function at(e,t,n){let s,r,o;se(e,Z,a=>n(6,s=a)),se(e,Ne,a=>n(1,r=a)),se(e,J,a=>n(2,o=a));let l=!1;function i(a){qe(Z,s=a,s),n(0,l=!1)}return window.addEventListener("keydown",a=>{a.key==="Escape"&&n(0,l=!1)}),[l,r,o,i,()=>n(0,l=!l),a=>i(a)]}class dt extends V{constructor(t){super(),U(this,t,at,ft,j,{})}}function pt(e){let t,n,s,r,o,l,i,u,c,a;return s=new dt({}),c=new lt({}),{c(){t=b("div"),n=b("div"),Y(s.$$.fragment),r=T(),o=b("div"),l=te(e[0]),i=T(),u=b("div"),Y(c.$$.fragment),m(n,"class","model-list svelte-wqepsk"),m(o,"class","content svelte-wqepsk"),m(u,"class","chat-input svelte-wqepsk"),m(t,"class","container svelte-wqepsk")},m(f,h){P(f,t,h),$(t,n),H(s,n,null),$(t,r),$(t,o),$(o,l),$(t,i),$(t,u),H(c,u,null),a=!0},p(f,[h]){(!a||h&1)&&de(l,f[0])},i(f){a||(F(s.$$.fragment,f),F(c.$$.fragment,f),a=!0)},o(f){W(s.$$.fragment,f),W(c.$$.fragment,f),a=!1},d(f){f&&O(t),K(s),K(c)}}}function ht(e,t,n){let s;return n(0,s="Hello, world!"),[s]}class gt extends V{constructor(t){super(),U(this,t,ht,pt,j,{})}}function mt(e){let t;return{c(){t=b("button"),t.textContent="Click me",m(t,"class","button is-prmiary is-small")},m(n,s){P(n,t,s)},p:v,i:v,o:v,d(n){n&&O(t)}}}class _t extends V{constructor(t){super(),U(this,t,null,mt,j,{})}}const $t="http://localhost:11434",yt=async()=>(await fetch(`${$t}/api/tags`)).json(),bt=async()=>{console.log("Refreshing models");const e=await yt();J.set(e.models),console.log("Models: ",ze(J))},Ae="CHIT",vt=[],Ce=[];function wt(e){return localStorage.getItem(Ae+"_"+e)}function Et(){Object.keys(R).filter(e=>!Ce.includes(e)).forEach(e=>{vt.push(R[e].subscribe(t=>{localStorage.setItem(Ae+"_"+e,JSON.stringify(t))}))})}function xt(){console.debug("Attempting to restore local storage stores..."),Object.keys(R).filter(e=>!Ce.includes(e)).forEach(e=>{var n;const t=wt(e);t&&((n=R[e])!=null&&n.set)&&R[e].set(JSON.parse(t))})}async function St(){console.log("Initializing app..."),xt(),Et(),await bt(),console.log("...init complete.")}function Ot(e){let t,n,s,r,o,l,i;return s=new _t({}),l=new gt({}),{c(){t=b("div"),n=b("div"),Y(s.$$.fragment),r=T(),o=b("div"),Y(l.$$.fragment),m(n,"class","sidebar svelte-18ybz9g"),m(o,"class","content svelte-18ybz9g"),m(t,"class","container svelte-18ybz9g")},m(u,c){P(u,t,c),$(t,n),H(s,n,null),$(t,r),$(t,o),H(l,o,null),i=!0},p:v,i(u){i||(F(s.$$.fragment,u),F(l.$$.fragment,u),i=!0)},o(u){W(s.$$.fragment,u),W(l.$$.fragment,u),i=!1},d(u){u&&O(t),K(s),K(l)}}}function Lt(e){return Qe(async()=>{console.log("onMount"),await St()}),[]}class kt extends V{constructor(t){super(),U(this,t,Lt,Ot,j,{})}}new kt({target:document.body});
